{"version":3,"sources":["pages/MyAccount/MyAccount.js"],"names":["MyAccount","intl","useIntl","openDialog","useQuestions","useAuth","auth","updateAuth","setAuth","photoURL","currentPhoroURL","displayName","currentDisplayName","email","useState","setDisplayName","setPhotoURL","isImageDialogOpen","setImageDialogOpen","hasChange","handleSave","a","handleDelete","handleClose","isAuthenticated","pageTitle","formatMessage","id","defaultMessage","style","display","justifyContent","alignItems","height","elevation","position","borderRadius","flexDirection","size","bottom","right","onClick","title","message","action","handleAction","color","aria-label","zIndex","top","marginRight","width","marginTop","alt","src","toUpperCase","marginBottom","value","onChange","e","target","inputProps","fontSize","fontWeight","textAlign","variant","in","isOpen","handleCropSubmit","image"],"mappings":"4WAmLeA,UAlKG,WAChB,IAAMC,EAAOC,cACLC,EAAeC,yBAAfD,WAFc,EAIgBE,oBAA9BC,EAJc,EAIdA,KAAMC,EAJQ,EAIRA,WAAYC,EAJJ,EAIIA,QAJJ,EASlBF,GAAQ,GATU,IAMpBG,SAAUC,OANU,MAMQ,GANR,MAOpBC,YAAaC,OAPO,MAOc,GAPd,MAQpBC,aARoB,MAQZ,GARY,IAUgBC,mBAASF,GAVzB,mBAUfD,EAVe,KAUFI,EAVE,OAWUD,mBAASJ,GAXnB,mBAWfD,EAXe,KAWLO,EAXK,OAY0BF,oBAAS,GAZnC,mBAYfG,EAZe,KAYIC,EAZJ,KAchBC,EACJR,IAAgBC,GAAsBH,IAAaC,EAM/CU,EAAU,uCAAG,sBAAAC,EAAA,sDACjBd,EAAW,2BAAKD,GAAN,IAAYK,cAAaF,cADlB,2CAAH,qDAuBVa,EAAY,uCAAG,WAAMC,GAAN,SAAAF,EAAA,sDACnBb,EAAQ,CAAEgB,iBAAiB,IAC3BD,IAFmB,2CAAH,sDAKlB,OACE,cAAC,IAAD,CACEE,UAAWxB,EAAKyB,cAAc,CAC5BC,GAAI,aACJC,eAAgB,eAHpB,SAME,sBACEC,MAAO,CACLC,QAAS,OACTC,eAAgB,SAChBC,WAAY,SACZC,OAAQ,QALZ,UAQE,eAAC,IAAD,CACEC,UAAW,EACXL,MAAO,CACLM,SAAU,WACVC,aAAc,GACdN,QAAS,OACTC,eAAgB,aAChBM,cAAe,SACfL,WAAY,UARhB,UAWE,cAAC,IAAD,CACEM,KAAK,SACLT,MAAO,CAAEM,SAAU,WAAYI,OAAQ,GAAIC,OAAQ,IACnDC,QArDe,WACvBtC,EAAW,CACTuC,MAAOzC,EAAKyB,cAAc,CACxBC,GAAI,8BACJC,eAAgB,oBAElBe,QAAS1C,EAAKyB,cAAc,CAC1BC,GAAI,gCACJC,eACE,mHAEJgB,OAAQ3C,EAAKyB,cAAc,CACzBC,GAAI,+BACJC,eAAgB,mBAElBiB,aAAcvB,KAuCRwB,MAAM,YACNC,aAAW,SALb,SAOE,cAAC,IAAD,MAGF,cAAC,IAAD,CACEN,QAAS,kBAAMvB,GAAmB,IAClCW,MAAO,CACLM,SAAU,WACVa,OAAQ,GACRC,IAAK,GACLC,aAAc,IAEhBJ,MAAM,UACNC,aAAW,OACXT,KAAK,QAVP,SAYE,cAAC,IAAD,MAGD7B,GACC,cAAC,IAAD,CACEoB,MAAO,CAAEsB,MAAO,IAAKlB,OAAQ,IAAKmB,WAAY,IAC9CC,IAAI,eACJC,IAAK7C,KAGPA,GACA,cAAC,IAAD,CACEoB,MAAO,CAAEsB,MAAO,IAAKlB,OAAQ,IAAKmB,WAAY,IAC9CC,IAAI,eAFN,SAIG1C,EAAcA,EAAY,GAAG4C,cAAgB,cAAC,IAAD,MAGlD,sBACE1B,MAAO,CACLC,QAAS,OACTE,WAAY,SACZK,cAAe,SACfe,UAAW,GACXI,aAAc,IANlB,UASE,cAAC,IAAD,CACEC,MAAO9C,EACP+C,SAAU,SAAAC,GAAC,OAAI5C,EAAe4C,EAAEC,OAAOH,QACvCI,WAAY,CACV,aAAc,QACdhC,MAAO,CACLiC,SAAU,GACVC,WAAY,OACZC,UAAW,aAIjB,cAAC,IAAD,CAAYC,QAAQ,KAApB,SAA0BpD,OAG5B,cAAC,IAAD,CAAMqD,GAAI/C,EAAV,SACE,cAAC,IAAD,CACEsB,QAASrB,EACTS,MAAO,CAAE2B,cAAe,IACxBV,MAAM,UACNC,aAAW,OAJb,SAME,cAAC,IAAD,WAKJ,cAAC,IAAD,CACEoB,OAAQlD,EACRM,YAAa,kBAAML,GAAmB,IACtCkD,iBAzIgB,SAAAC,GACxBrD,EAAYqD","file":"static/js/21.6a073207.chunk.js","sourcesContent":["import Avatar from \"@material-ui/core/Avatar\";\r\nimport Camera from \"@material-ui/icons/CameraAlt\";\r\nimport Delete from \"@material-ui/icons/Delete\";\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport Page from \"material-ui-shell/lib/containers/Page/Page\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport PersonIcon from \"@material-ui/icons/Person\";\r\nimport React, { useState } from \"react\";\r\nimport Save from \"@material-ui/icons/Save\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\nimport { useAuth } from \"base-shell/lib/providers/Auth\";\r\nimport { useIntl } from \"react-intl\";\r\nimport { useQuestions } from \"material-ui-shell/lib/providers/Dialogs/Question\";\r\nimport ImgageUploadDialog from \"material-ui-shell/lib/containers/ImageUploadDialog\";\r\n\r\nconst MyAccount = () => {\r\n  const intl = useIntl();\r\n  const { openDialog } = useQuestions();\r\n\r\n  const { auth, updateAuth, setAuth } = useAuth();\r\n  const {\r\n    photoURL: currentPhoroURL = \"\",\r\n    displayName: currentDisplayName = \"\",\r\n    email = \"\",\r\n  } = auth || {};\r\n  const [displayName, setDisplayName] = useState(currentDisplayName);\r\n  const [photoURL, setPhotoURL] = useState(currentPhoroURL);\r\n  const [isImageDialogOpen, setImageDialogOpen] = useState(false);\r\n\r\n  const hasChange =\r\n    displayName !== currentDisplayName || photoURL !== currentPhoroURL;\r\n\r\n  const handleImageChange = image => {\r\n    setPhotoURL(image);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    updateAuth({ ...auth, displayName, photoURL });\r\n  };\r\n\r\n  const openDeleteDialog = () => {\r\n    openDialog({\r\n      title: intl.formatMessage({\r\n        id: \"delete_account_dialog_title\",\r\n        defaultMessage: \"Delete Account?\",\r\n      }),\r\n      message: intl.formatMessage({\r\n        id: \"delete_account_dialog_message\",\r\n        defaultMessage:\r\n          \"This Account and all related data to it will be deleted permanently. Do you want to proceed with the deletion?\",\r\n      }),\r\n      action: intl.formatMessage({\r\n        id: \"delete_account_dialog_action\",\r\n        defaultMessage: \"DELETE ACCOUNT\",\r\n      }),\r\n      handleAction: handleDelete,\r\n    });\r\n  };\r\n\r\n  const handleDelete = async handleClose => {\r\n    setAuth({ isAuthenticated: false });\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <Page\r\n      pageTitle={intl.formatMessage({\r\n        id: \"my_account\",\r\n        defaultMessage: \"My Account\",\r\n      })}\r\n    >\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          height: \"100%\",\r\n        }}\r\n      >\r\n        <Paper\r\n          elevation={3}\r\n          style={{\r\n            position: \"relative\",\r\n            borderRadius: 18,\r\n            display: \"flex\",\r\n            justifyContent: \"flex-start\",\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <Fab\r\n            size='medium'\r\n            style={{ position: \"absolute\", bottom: 40, right: -16 }}\r\n            onClick={openDeleteDialog}\r\n            color='secondary'\r\n            aria-label='delete'\r\n          >\r\n            <Delete />\r\n          </Fab>\r\n\r\n          <Fab\r\n            onClick={() => setImageDialogOpen(true)}\r\n            style={{\r\n              position: \"absolute\",\r\n              zIndex: 99,\r\n              top: 50,\r\n              marginRight: -60,\r\n            }}\r\n            color='primary'\r\n            aria-label='save'\r\n            size='small'\r\n          >\r\n            <Camera />\r\n          </Fab>\r\n\r\n          {photoURL && (\r\n            <Avatar\r\n              style={{ width: 120, height: 120, marginTop: -40 }}\r\n              alt='User Picture'\r\n              src={photoURL}\r\n            />\r\n          )}\r\n          {!photoURL && (\r\n            <Avatar\r\n              style={{ width: 120, height: 120, marginTop: -40 }}\r\n              alt='User Picture'\r\n            >\r\n              {displayName ? displayName[0].toUpperCase() : <PersonIcon />}\r\n            </Avatar>\r\n          )}\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              flexDirection: \"column\",\r\n              marginTop: 18,\r\n              marginBottom: 18,\r\n            }}\r\n          >\r\n            <InputBase\r\n              value={displayName}\r\n              onChange={e => setDisplayName(e.target.value)}\r\n              inputProps={{\r\n                \"aria-label\": \"naked\",\r\n                style: {\r\n                  fontSize: 26,\r\n                  fontWeight: \"bold\",\r\n                  textAlign: \"center\",\r\n                },\r\n              }}\r\n            />\r\n            <Typography variant='h6'>{email}</Typography>\r\n          </div>\r\n\r\n          <Zoom in={hasChange}>\r\n            <Fab\r\n              onClick={handleSave}\r\n              style={{ marginBottom: -20 }}\r\n              color='primary'\r\n              aria-label='save'\r\n            >\r\n              <Save />\r\n            </Fab>\r\n          </Zoom>\r\n        </Paper>\r\n        {\r\n          <ImgageUploadDialog\r\n            isOpen={isImageDialogOpen}\r\n            handleClose={() => setImageDialogOpen(false)}\r\n            handleCropSubmit={handleImageChange}\r\n          />\r\n        }\r\n      </div>\r\n    </Page>\r\n  );\r\n};\r\n\r\nexport default MyAccount;\r\n"],"sourceRoot":""}